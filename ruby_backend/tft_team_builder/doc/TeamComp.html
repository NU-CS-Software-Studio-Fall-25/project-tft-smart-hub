<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: TeamComp
  
    &mdash; TFT Smart Hub API Documentation
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "TeamComp";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TeamComp</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: TeamComp
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></li>
          
            <li class="next">TeamComp</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/team_comp.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>= TeamComp Model</p>

<p>Represents a Teamfight Tactics team composition. Stores champion configurations, metadata, and user interactions.</p>

<p>== Attributes * <code>name</code> - Team composition name (required, max 50 chars) * <code>description</code> - Detailed description (max 200 chars) * <code>notes</code> - Additional notes (max 100 chars) * <code>champions</code> - Comma-separated champion names (required) * <code>set_identifier</code> - TFT set identifier (e.g., ‘TFT15’, default: TFT15) * <code>team_type</code> - Type of team (‘system’ or ‘user’) * <code>size</code> - Number of units in composition * <code>play_count</code> - Number of times this composition was played * <code>win_count</code> - Number of games won with this composition * <code>top4_count</code> - Number of top 4 placements * <code>avg_placement</code> - Average placement statistic * <code>composition_key</code> - Unique identifier for composition * <code>top1_rate</code> - First place win rate * <code>top2_rate</code> - Top 2 placement rate * <code>top3_rate</code> - Top 3 placement rate * <code>top4_rate</code> - Top 4 placement rate * <code>win_rate</code> - Overall win rate percentage * <code>play_rate</code> - Play rate percentage * <code>user_id</code> - Associated user (nullable for system teams) * <code>created_at</code> - Record creation timestamp * <code>updated_at</code> - Record update timestamp</p>

<p>== Associations * +belongs_to :user+ - Owner of the team composition (optional) * +has_many :likes+ - User likes on this team * +has_many :favorites+ - User favorites of this team * +has_many :comments+ - Comments on this team</p>

<p>== Validations * <code>name</code> - Required, maximum 50 characters * <code>champions</code> - Required (comma-separated champion list) * <code>set_identifier</code> - Required (auto-set to default if blank) * <code>description</code> - Optional, maximum 200 characters * <code>notes</code> - Optional, maximum 100 characters</p>

<p>== Scopes * +for_set(set_identifier)+ - Filter teams by TFT set * <code>system_teams</code> - Get all system teams * <code>user_teams</code> - Get all user-created teams</p>

<p>== Class Constants * <code>DEFAULT_SET_IDENTIFIER</code> - Default TFT set (from ENV or “TFT15”)</p>

<p>== Methods * <code>champion_names</code> - Parse and return array of champion names * <code>champion_records</code> - Fetch associated Champion records from database * <code>win_rate_value</code> - Convert win_rate to float * <code>play_rate_value</code> - Convert play_rate to float * <code>derived_metadata</code> - Generate metadata hash with calculated values</p>

<p>== Example # Create a user team composition team = TeamComp.create( name: “Astral Casters”, champions: “Ahri, Lulu, Taliyah, Neeko”, set_identifier: “TFT15”, team_type: “user”, user: current_user )</p>

<p># Get champion objects team.champion_records # =&gt; [#&lt;Champion&gt;, #&lt;Champion&gt;, …]</p>

<p># Filter by set TeamComp.for_set(“TFT15”)</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#champion_names-instance_method" title="#champion_names (instance method)">#<strong>champion_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#champion_records-instance_method" title="#champion_records (instance method)">#<strong>champion_records</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#derived_metadata-instance_method" title="#derived_metadata (instance method)">#<strong>derived_metadata</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#play_rate_value-instance_method" title="#play_rate_value (instance method)">#<strong>play_rate_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#win_rate_value-instance_method" title="#win_rate_value (instance method)">#<strong>win_rate_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="champion_names-instance_method">
  
    #<strong>champion_names</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/team_comp.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_champion_names'>champion_names</span>
  <span class='id identifier rubyid_champions'>champions</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:blank?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="champion_records-instance_method">
  
    #<strong>champion_records</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/team_comp.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_champion_records'>champion_records</span>
  <span class='comment'># Use cached records if available (set by controller preloading)
</span>  <span class='kw'>return</span> <span class='ivar'>@champion_records_cache</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@champion_records_cache</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='id identifier rubyid_champion_names'>champion_names</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='ivar'>@champion_records</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Champion.html" title="Champion (class)">Champion</a></span></span>
                        <span class='period'>.</span><span class='id identifier rubyid_for_set'>for_set</span><span class='lparen'>(</span><span class='id identifier rubyid_set_identifier'>set_identifier</span><span class='rparen'>)</span>
                        <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
                        <span class='period'>.</span><span class='id identifier rubyid_in_order_of'>in_order_of</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="derived_metadata-instance_method">
  
    #<strong>derived_metadata</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/team_comp.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_derived_metadata'>derived_metadata</span>
  <span class='lbrace'>{</span>
    <span class='label'>set:</span> <span class='id identifier rubyid_set_identifier'>set_identifier</span><span class='comma'>,</span>
    <span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>||</span> <span class='id identifier rubyid_champion_names'>champion_names</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span>
    <span class='label'>playCount:</span> <span class='id identifier rubyid_play_count'>play_count</span><span class='comma'>,</span>
    <span class='label'>winCount:</span> <span class='id identifier rubyid_win_count'>win_count</span><span class='comma'>,</span>
    <span class='label'>top4Count:</span> <span class='id identifier rubyid_top4_count'>top4_count</span><span class='comma'>,</span>
    <span class='label'>avgPlacement:</span> <span class='id identifier rubyid_avg_placement'>avg_placement</span><span class='comma'>,</span>
    <span class='label'>compositionKey:</span> <span class='id identifier rubyid_composition_key'>composition_key</span><span class='comma'>,</span>
    <span class='label'>top1Rate:</span> <span class='id identifier rubyid_top1_rate'>top1_rate</span><span class='comma'>,</span>
    <span class='label'>top2Rate:</span> <span class='id identifier rubyid_top2_rate'>top2_rate</span><span class='comma'>,</span>
    <span class='label'>top3Rate:</span> <span class='id identifier rubyid_top3_rate'>top3_rate</span><span class='comma'>,</span>
    <span class='label'>top4Rate:</span> <span class='id identifier rubyid_top4_rate'>top4_rate</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="play_rate_value-instance_method">
  
    #<strong>play_rate_value</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/team_comp.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_play_rate_value'>play_rate_value</span>
  <span class='id identifier rubyid_play_rate'>play_rate</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_f'>to_f</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="win_rate_value-instance_method">
  
    #<strong>win_rate_value</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/team_comp.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_win_rate_value'>win_rate_value</span>
  <span class='id identifier rubyid_win_rate'>win_rate</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_f'>to_f</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Dec  6 17:52:32 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.3.4).
</div>

    </div>
  </body>
</html>